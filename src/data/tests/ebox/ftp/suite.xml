<suite>
    <name>eBox FTP tests</name>
    <desc>Contains ftp-related tests.</desc>
    
    <scenario>ebox/ftp.xml</scenario>

    <test type="selenium">
        <name>EnableModules</name>
        <desc>
        Enables network, firewall, users and samba modules.
        </desc>

        <host>ebox-server</host>
        <dir>enable-modules</dir>
    </test>        

    <test type="selenium">
        <name>ConfigNetwork</name>
        <desc>
        Set the interface as external.
        </desc>

        <host>ebox-server</host>
        <dir>set-external</dir>
        <var name="IFACE" value="eth2"/>
    </test>        

    <test type="selenium">
        <name>AddUserFoo</name>
        <desc>
        Create a new user.
        </desc>

        <host>ebox-server</host>
        <dir>add-user</dir>

        <var name="USERNAME" value="foo"/>
        <var name="PASSWORD" value="foobar"/>
    </test>

    <test>
        <name>TestFTPWrite</name>
        <desc>Puts a file into the created user account</desc>

        <host>test-client</host>
        <dir>test-write</dir>
        <var name="USER" value="foo"/>
        <var name="PASS" value="foobar"/>
        <var name="ERROR" value="failed"/>
    </test>        

    <test>
        <name>TestFTPRead</name>
        <desc>Gets a file into the created user account</desc>

        <host>test-client</host>
        <dir>test-read</dir>
        <var name="USER" value="foo"/>
        <var name="PASS" value="foobar"/>
        <var name="ERROR" value="failed"/>
    </test>        

    <test>
        <name>TestFTPBadUser</name>
        <desc>
        Try to read from an account with incorrect user.
        </desc>

        <host>test-client</host>
        <dir>test-read</dir>

        <var name="USER" value="inexistent"/>
        <var name="PASS" value="foobar"/>
        <var name="ERROR" value="failed"/>

        <assert>failed</assert>
    </test>

    <test>
        <name>TestFTPBadPassword</name>
        <desc>
        Try to read from an account with incorrect password.
        </desc>

        <host>test-client</host>
        <dir>test-read</dir>

        <var name="USER" value="foo"/>
        <var name="PASS" value="barfoo"/>
        <var name="ERROR" value="failed"/>

        <assert>failed</assert>
    </test>
</suite>
